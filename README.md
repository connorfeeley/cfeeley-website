# About

This is repository contains the sources for my personal site.

The entire site is generated by `publish.el` based (primarily) on the
`org` files under `content/`.

# Commands

## Nix `devshell` commands

Using my nix `progenix-std` devshell:

``` shell
nix develop --command menu
```

``` shell

[general commands]

  menu    - prints this menu

[site]

  publish - Generate website by calling publish.el
  readme  - Export README.org to README.md

```

## Generate the site

Simply run `publish` from inside the devshell:

``` shell
publish
```

Alternatively, run the `publish` command from outside the devshell:

``` shell
nix develop --command publish
```

### Watching for changes

It's a bit annoying having to flip to a `vterm` to run `publish`. I'd
prefer it if the site were automatically re-generated whenever there's a
change.

`entr` can handle this for us:

``` shell
fd . --extension=org --extension=css --extension=js --extension=el | entr publish
```

## Export `README.org` to `README.md`

Since sourcehut doesn't support `org` README files, we need to convert
it manually by running the `readme` devshell command:

``` shell
readme
```

Alternatively, run the `readme` command from outside the devshell:

``` shell
nix develop --command readme
```

# Acknowledgements

- System Crafters' (David Wilson) `org-mode` site: \[
  [webpage](https://systemcrafters.net/) \|
  [src](https://github.com/SystemCrafters/systemcrafters.github.io) \]
